<Window x:Class="takip.CementSiloDetailsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Silo Details" Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        Background="#F5F5F5">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock x:Name="TitleText" Grid.Row="0" Text="Silo Details" 
                   FontSize="18" FontWeight="Bold" 
                   HorizontalAlignment="Center" Margin="0,0,0,20"/>

        <!-- Content -->
        <TabControl Grid.Row="1">
            <!-- General Information -->
            <TabItem Header="📊 General Information">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <!-- Silo Information -->
                        <GroupBox Header="Silo Information" Margin="0,0,0,15">
                            <Grid Margin="15">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Silo Number:" FontWeight="Bold"/>
                                <TextBlock x:Name="SiloNumberText" Grid.Row="0" Grid.Column="1"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Cement Type:" FontWeight="Bold"/>
                                <TextBlock x:Name="CementTypeText" Grid.Row="1" Grid.Column="1"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Current Amount:" FontWeight="Bold"/>
                                <TextBlock x:Name="CurrentAmountText" Grid.Row="2" Grid.Column="1"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Capacity:" FontWeight="Bold"/>
                                <TextBlock x:Name="CapacityText" Grid.Row="3" Grid.Column="1"/>

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Min. Level:" FontWeight="Bold"/>
                                <TextBlock x:Name="MinLevelText" Grid.Row="4" Grid.Column="1"/>
                            </Grid>
                        </GroupBox>

                        <!-- Status Information -->
                        <GroupBox Header="Status Information" Margin="0,0,0,15">
                            <Grid Margin="15">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Fill Percentage:" FontWeight="Bold"/>
                                <TextBlock x:Name="FillPercentageText" Grid.Row="0" Grid.Column="1"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Status:" FontWeight="Bold"/>
                                <TextBlock x:Name="StatusText" Grid.Row="1" Grid.Column="1"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Last Updated:" FontWeight="Bold"/>
                                <TextBlock x:Name="LastUpdatedText" Grid.Row="2" Grid.Column="1"/>
                            </Grid>
                        </GroupBox>

                        <!-- Visual Silo -->
                        <GroupBox Header="Visual Silo" Margin="0,0,0,15">
                            <Border Background="#F0F0F0" CornerRadius="8" Height="200" Margin="15">
                                <Grid>
                                    <!-- Silo Drawing -->
                                    <Rectangle Fill="#E0E0E0" Stroke="#999999" StrokeThickness="2" 
                                              RadiusX="10" RadiusY="10" Margin="50,20,50,20"/>
                                    
                                    <!-- Cement Level -->
                                    <Rectangle x:Name="FillRectangle" Fill="#4CAF50" 
                                              Stroke="#666666" StrokeThickness="1"
                                              RadiusX="8" RadiusY="8" Margin="52,22,52,22"
                                              VerticalAlignment="Bottom"/>
                                    
                                    <!-- Level Indicator -->
                                    <TextBlock x:Name="FillText" Text="0%" 
                                              HorizontalAlignment="Center" VerticalAlignment="Center"
                                              FontSize="16" FontWeight="Bold" Foreground="#333333"/>
                                </Grid>
                            </Border>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Consumption History -->
            <TabItem Header="📉 Consumption History">
                <DataGrid x:Name="ConsumptionGrid" AutoGenerateColumns="False" 
                         CanUserAddRows="False" IsReadOnly="True" FontSize="11">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Date" Binding="{Binding ConsumedAt, StringFormat={}{0:dd.MM.yyyy HH:mm}}" Width="120"/>
                        <DataGridTextColumn Header="Amount" Binding="{Binding ConsumedAmount, StringFormat={}{0:F0} kg}" Width="80"/>
                        <DataGridTextColumn Header="Mixer" Binding="{Binding MixerId}" Width="60"/>
                        <DataGridTextColumn Header="Type" Binding="{Binding ConsumptionType}" Width="100"/>
                        <DataGridTextColumn Header="Remaining" Binding="{Binding RemainingAmount, StringFormat={}{0:F0} kg}" Width="80"/>
                        <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>

            <!-- Addition History -->
            <TabItem Header="📈 Addition History">
                <DataGrid x:Name="RefillGrid" AutoGenerateColumns="False" 
                         CanUserAddRows="False" IsReadOnly="True" FontSize="11">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Date" Binding="{Binding RefilledAt, StringFormat={}{0:dd.MM.yyyy HH:mm}}" Width="120"/>
                        <DataGridTextColumn Header="Added" Binding="{Binding AddedAmount, StringFormat={}{0:F0} kg}" Width="80"/>
                        <DataGridTextColumn Header="Previous" Binding="{Binding PreviousAmount, StringFormat={}{0:F0} kg}" Width="80"/>
                        <DataGridTextColumn Header="New" Binding="{Binding NewAmount, StringFormat={}{0:F0} kg}" Width="80"/>
                        <DataGridTextColumn Header="Operator" Binding="{Binding OperatorName}" Width="100"/>
                        <DataGridTextColumn Header="Shipment" Binding="{Binding ShipmentNumber}" Width="100"/>
                        <DataGridTextColumn Header="Supplier" Binding="{Binding Supplier}" Width="100"/>
                        <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
        </TabControl>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
            <Button Content="🔄 Refresh" Width="100" Height="35" Margin="0,0,10,0"
                   Background="#FF9800" Foreground="White" FontWeight="Bold"
                   Click="RefreshButton_Click"/>
            <Button Content="❌ Close" Width="100" Height="35"
                   Background="#F44336" Foreground="White" FontWeight="Bold"
                   Click="CloseButton_Click"/>
        </StackPanel>
    </Grid>
</Window>







